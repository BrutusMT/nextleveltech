<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guia Interativo de Formatação de Computadores</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; scroll-behavior: smooth; }
        .nav-link { transition: color 0.3s, border-bottom-color 0.3s; }
        .nav-link.active { color: #6366f1; border-bottom-color: #6366f1; }
        .quiz-option { transition: background-color 0.2s; }
        .quiz-option:hover { background-color: #eef2ff; }
        .quiz-option.selected { background-color: #e0e7ff; border-color: #818cf8; }
        .quiz-option.correct { background-color: #dcfce7; border-color: #22c55e; }
        .quiz-option.incorrect { background-color: #fee2e2; border-color: #ef4444; }
        .chart-container { position: relative; width: 100%; max-width: 800px; margin: auto; height: 350px; max-height: 500px; }
        @media (min-width: 768px) { .chart-container { height: 450px; } }
        button:disabled { opacity: 0.5; cursor: not-allowed; }
        .main-content { display: block; }
        .hidden-section { display: none; }
        .modal-form { display: none; }
        .modal-form.active { display: block; }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <!-- Auth Modal -->
    <div id="auth-modal" class="fixed inset-0 bg-black bg-opacity-60 z-50 hidden items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-2xl p-8 max-w-sm w-full transform transition-all scale-95 opacity-0" id="auth-modal-content">
            <!-- Login Form -->
            <div id="login-view" class="modal-form active">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-slate-800">Acessar Painel</h2>
                    <button id="close-modal-btn" class="text-slate-400 hover:text-slate-600 text-3xl leading-none">&times;</button>
                </div>
                <div id="login-error" class="text-red-500 text-sm mb-4 text-center hidden">Usuário ou senha inválidos.</div>
                <form id="login-form">
                    <div class="mb-4">
                        <label for="login-username" class="block text-sm font-medium text-slate-700 mb-1">Nome de Usuário</label>
                        <input type="text" id="login-username" class="w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500" required>
                    </div>
                    <div class="mb-6">
                        <label for="login-password" class="block text-sm font-medium text-slate-700 mb-1">Senha</label>
                        <input type="password" id="login-password" class="w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500" required>
                    </div>
                    <button type="submit" class="w-full text-white font-bold py-3 px-4 rounded-lg bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700 transition-all duration-300">Entrar</button>
                    <p class="text-center text-sm mt-4">
                        Não tem uma conta? <a href="#" id="show-register-link" class="font-medium text-indigo-600 hover:text-indigo-500">Registre-se</a>
                    </p>
                </form>
            </div>
            <!-- Register Form -->
            <div id="register-view" class="modal-form">
                 <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-slate-800">Criar Conta</h2>
                    <button id="close-modal-btn-register" class="text-slate-400 hover:text-slate-600 text-3xl leading-none">&times;</button>
                </div>
                <div id="register-error" class="text-red-500 text-sm mb-4 text-center hidden"></div>
                <form id="register-form">
                    <div class="mb-4">
                        <label for="register-username" class="block text-sm font-medium text-slate-700 mb-1">Nome de Usuário</label>
                        <input type="text" id="register-username" class="w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500" required>
                    </div>
                    <div class="mb-6">
                        <label for="register-password" class="block text-sm font-medium text-slate-700 mb-1">Senha</label>
                        <input type="password" id="register-password" class="w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500" required>
                    </div>
                    <button type="submit" class="w-full text-white font-bold py-3 px-4 rounded-lg bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700 transition-all duration-300">Registrar</button>
                    <p class="text-center text-sm mt-4">
                        Já tem uma conta? <a href="#" id="show-login-link" class="font-medium text-indigo-600 hover:text-indigo-500">Faça login</a>
                    </p>
                </form>
            </div>
        </div>
    </div>


    <header class="bg-white/80 backdrop-blur-lg sticky top-0 z-40 shadow-sm">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex-shrink-0">
                    <a href="#" id="home-link" class="text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-purple-500 to-indigo-600">Guia de Formatação</a>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#conceitos" class="nav-link main-nav-link px-3 py-2 rounded-md text-sm font-medium text-slate-600 hover:text-indigo-600 border-b-2 border-transparent">Conceitos</a>
                        <a href="#processo" class="nav-link main-nav-link px-3 py-2 rounded-md text-sm font-medium text-slate-600 hover:text-indigo-600 border-b-2 border-transparent">Processo</a>
                        <a href="#seguranca" class="nav-link main-nav-link px-3 py-2 rounded-md text-sm font-medium text-slate-600 hover:text-indigo-600 border-b-2 border-transparent">Segurança</a>
                        <a href="#quiz" class="nav-link main-nav-link px-3 py-2 rounded-md text-sm font-medium text-slate-600 hover:text-indigo-600 border-b-2 border-transparent">Quiz</a>
                        <button id="login-nav-btn" class="ml-4 bg-indigo-500 text-white font-medium py-2 px-4 rounded-lg hover:bg-indigo-600 transition-colors">Painel / Login</button>
                        <button id="logout-nav-btn" class="ml-4 hidden bg-purple-500 text-white font-medium py-2 px-4 rounded-lg hover:bg-purple-600 transition-colors">Sair</button>
                    </div>
                </div>
                <div class="md:hidden">
                     <button id="mobile-menu-button" class="inline-flex items-center justify-center p-2 rounded-md text-slate-500 hover:text-white hover:bg-indigo-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-indigo-600 focus:ring-white">
                        <span class="sr-only">Abrir menu principal</span>
                        <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                </div>
            </div>
             <div id="mobile-menu" class="hidden md:hidden">
                <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                    <a href="#conceitos" class="nav-link main-nav-link block px-3 py-2 rounded-md text-base font-medium text-slate-600 hover:text-indigo-600">Conceitos</a>
                    <a href="#processo" class="nav-link main-nav-link block px-3 py-2 rounded-md text-base font-medium text-slate-600 hover:text-indigo-600">Processo</a>
                    <a href="#seguranca" class="nav-link main-nav-link block px-3 py-2 rounded-md text-base font-medium text-slate-600 hover:text-indigo-600">Segurança</a>
                    <a href="#quiz" class="nav-link main-nav-link block px-3 py-2 rounded-md text-base font-medium text-slate-600 hover:text-indigo-600">Quiz</a>
                    <button id="mobile-login-btn" class="w-full text-left mt-2 block px-3 py-2 rounded-md text-base font-medium bg-indigo-500 text-white">Painel / Login</button>
                    <button id="mobile-logout-btn" class="w-full text-left mt-2 hidden px-3 py-2 rounded-md text-base font-medium bg-purple-500 text-white">Sair</button>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">
        <div id="main-content-wrapper" class="main-content">
            <!-- Main guide content -->
            <section id="inicio" class="text-center mb-16 md:mb-24">
                <h1 class="text-4xl md:text-5xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-purple-500 to-indigo-600 mb-4">Desvendando a Formatação</h1>
                <p class="max-w-3xl mx-auto text-lg text-slate-600">Um guia essencial para otimizar o desempenho, garantir a segurança e entender o ciclo de vida dos dados no seu computador.</p>
            </section>
    
            <section id="conceitos" class="mb-16 md:mb-24 scroll-mt-16">
                 <div class="text-center mb-12"><h2 class="text-3xl font-bold mb-2">Conceitos Fundamentais</h2><p class="text-md text-slate-500">Explore os conceitos básicos que definem a formatação.</p></div>
                 <div class="bg-white p-8 rounded-xl shadow-lg mb-12"><h3 class="text-2xl font-semibold mb-4 text-indigo-700">O que é Formatação?</h3><p class="text-slate-600 mb-6">A formatação é um processo técnico que remove todos os dados de um disco (HD ou SSD) e o prepara para um novo uso. É uma etapa crucial na reinstalação de um sistema operacional (como Windows, macOS ou Linux), restaurando o computador a um estado inicial, como se fosse recém-saído da fábrica. Este procedimento não só libera espaço, mas também resolve problemas de desempenho e segurança.</p></div>
                 <div class="bg-white p-8 rounded-xl shadow-lg mb-12"><h3 class="text-2xl font-semibold mb-4 text-indigo-700">Formatação Rápida vs. Completa</h3><div class="overflow-x-auto"><table class="w-full text-left border-collapse"><thead class="bg-slate-100"><tr><th class="p-4 font-semibold border-b border-slate-200">Característica</th><th class="p-4 font-semibold border-b border-slate-200">Formatação Rápida</th><th class="p-4 font-semibold border-b border-slate-200">Formatação Completa</th></tr></thead><tbody><tr class="hover:bg-slate-50"><td class="p-4 border-b border-slate-200 font-medium">Método</td><td class="p-4 border-b border-slate-200">Apaga apenas os índices dos arquivos.</td><td class="p-4 border-b border-slate-200">Apaga os índices e sobrescreve os dados.</td></tr><tr class="hover:bg-slate-50"><td class="p-4 border-b border-slate-200 font-medium">Velocidade</td><td class="p-4 border-b border-slate-200">Muito mais rápida.</td><td class="p-4 border-b border-slate-200">Consideravelmente mais demorada.</td></tr><tr class="hover:bg-slate-50"><td class="p-4 border-b border-slate-200 font-medium">Segurança</td><td class="p-4 border-b border-slate-200">Baixa. Dados podem ser recuperados.</td><td class="p-4 border-b border-slate-200">Alta. Recuperação quase impossível.</td></tr><tr class="hover:bg-slate-50"><td class="p-4 font-medium">Uso Ideal</td><td class="p-4">Reinstalar o SO rapidamente.</td><td class="p-4">Vender/doar o PC.</td></tr></tbody></table></div></div>
                 <div class="bg-white p-8 rounded-xl shadow-lg"><h3 class="text-2xl font-semibold mb-4 text-indigo-700">Unidades de Armazenamento</h3><div class="chart-container"><canvas id="storageChart"></canvas></div></div>
            </section>

             <section id="processo" class="mb-16 md:mb-24 scroll-mt-16">
                 <div class="text-center mb-12"><h2 class="text-3xl font-bold mb-2">O Processo de Formatação</h2><p class="text-md text-slate-500">Siga estes passos para uma formatação segura.</p></div>
                 <div class="relative"><div class="absolute left-1/2 -ml-0.5 w-1 h-full bg-indigo-200 hidden md:block" aria-hidden="true"></div><div class="space-y-12 md:space-y-16"><div class="relative flex items-start md:items-center md:space-x-8"><div class="flex-shrink-0 w-12 h-12 rounded-full bg-indigo-500 text-white flex items-center justify-center font-bold text-lg z-10">1</div><div class="flex-grow bg-white p-6 rounded-xl shadow-lg"><h4 class="text-xl font-semibold mb-2">Backup de Dados</h4><p class="text-slate-600">Copie seus arquivos para um disco externo ou nuvem.</p></div></div><div class="relative flex items-start md:items-center md:space-x-8"><div class="flex-shrink-0 w-12 h-12 rounded-full bg-indigo-500 text-white flex items-center justify-center font-bold text-lg z-10">2</div><div class="flex-grow bg-white p-6 rounded-xl shadow-lg"><h4 class="text-xl font-semibold mb-2">Reinstalação do SO</h4><p class="text-slate-600">Use um pendrive bootável para instalar o sistema.</p></div></div><div class="relative flex items-start md:items-center md:space-x-8"><div class="flex-shrink-0 w-12 h-12 rounded-full bg-indigo-500 text-white flex items-center justify-center font-bold text-lg z-10">3</div><div class="flex-grow bg-white p-6 rounded-xl shadow-lg"><h4 class="text-xl font-semibold mb-2">Instalação de Drivers</h4><p class="text-slate-600">Instale os drivers do fabricante para o hardware.</p></div></div><div class="relative flex items-start md:items-center md:space-x-8"><div class="flex-shrink-0 w-12 h-12 rounded-full bg-indigo-500 text-white flex items-center justify-center font-bold text-lg z-10">4</div><div class="flex-grow bg-white p-6 rounded-xl shadow-lg"><h4 class="text-xl font-semibold mb-2">Instalação de Programas</h4><p class="text-slate-600">Instale seus aplicativos essenciais.</p></div></div><div class="relative flex items-start md:items-center md:space-x-8"><div class="flex-shrink-0 w-12 h-12 rounded-full bg-indigo-500 text-white flex items-center justify-center font-bold text-lg z-10">5</div><div class="flex-grow bg-white p-6 rounded-xl shadow-lg"><h4 class="text-xl font-semibold mb-2">Restauração dos Dados</h4><p class="text-slate-600">Copie seus arquivos do backup de volta.</p></div></div></div></div>
            </section>
             <section id="seguranca" class="mb-16 md:mb-24 scroll-mt-16">
                 <div class="text-center mb-12"><h2 class="text-3xl font-bold mb-2">Proteção de Dados</h2><p class="text-md text-slate-500">Aprenda a proteger suas informações.</p></div>
                <div class="grid md:grid-cols-1 lg:grid-cols-3 gap-8"><div class="bg-white p-6 rounded-xl shadow-md"><h4 class="text-xl font-semibold mb-3 text-indigo-700">Backup Automatizado</h4><p class="text-slate-600">Use softwares para criar cópias de segurança programadas.</p></div><div class="bg-white p-6 rounded-xl shadow-md"><h4 class="text-xl font-semibold mb-3 text-indigo-700">Criptografia de Disco</h4><p class="text-slate-600">Ative BitLocker (Windows) ou FileVault (macOS) para proteger arquivos.</p></div><div class="bg-white p-6 rounded-xl shadow-md"><h4 class="text-xl font-semibold mb-3 text-indigo-700">Destruição Segura</h4><p class="text-slate-600">Use softwares de "limpeza segura" para sobrescrever o disco.</p></div></div>
            </section>
    
            <section id="quiz" class="scroll-mt-16">
                <div class="bg-white p-8 rounded-xl shadow-lg">
                    <div class="text-center mb-8">
                        <h2 class="text-3xl font-bold mb-2">Teste seus Conhecimentos</h2>
                        <p id="quiz-subtitle" class="text-md text-slate-500">Faça login para salvar seu progresso e iniciar o quiz.</p>
                    </div>
                    <div id="quiz-container">
                        <div id="quiz-start-screen">
                             <div class="text-center">
                                <button id="start-quiz-btn" class="text-white font-bold py-3 px-8 rounded-lg bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700 transition-all">Iniciar Quiz</button>
                            </div>
                        </div>
                        <div id="quiz-question-screen" class="hidden">
                            <input type="hidden" id="student-name">
                            <div class="text-center mb-4"><p id="quiz-progress" class="text-sm font-medium text-slate-500"></p><div class="w-full bg-slate-200 rounded-full h-2.5 mt-2"><div id="quiz-progress-bar" class="bg-indigo-500 h-2.5 rounded-full"></div></div></div>
                            <h3 id="quiz-question" class="text-xl font-semibold text-center mt-6 mb-2"></h3>
                            <div id="video-link-container" class="text-center mb-4 h-6"></div>
                            <div id="quiz-options" class="space-y-4"></div>
                            <div id="quiz-message" class="text-red-500 text-sm text-center mt-4 mb-2 h-5"></div>
                            <div class="mt-8 flex justify-between items-center">
                                <button id="prev-question-btn" class="bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 transition-colors">Anterior</button>
                                <button id="next-question-btn" class="bg-indigo-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-indigo-700 transition-colors">Próxima</button>
                            </div>
                        </div>
                        <div id="quiz-results-screen" class="hidden">
                            <h3 class="text-2xl font-bold text-center mb-4">Quiz Finalizado!</h3>
                            <div class="text-center text-lg text-slate-600 mb-6">
                                <p>Aluno(a): <span id="results-student-name" class="font-bold text-indigo-700"></span></p>
                                <p>Você acertou <span id="quiz-score" class="font-bold text-indigo-600">0</span> de <span id="quiz-total" class="font-bold">44</span> perguntas.</p>
                                <p id="quiz-percentage" class="text-3xl font-bold mt-2 text-indigo-500">0%</p>
                            </div>
                            <div id="quiz-feedback" class="text-center text-slate-700 font-medium mb-8"></div>
                            <div class="flex flex-col sm:flex-row justify-center items-center gap-4">
                                <button id="restart-quiz-btn" class="w-full sm:w-auto bg-slate-200 text-slate-700 font-bold py-3 px-6 rounded-lg hover:bg-slate-300 transition-colors">Tentar Novamente</button>
                                <button id="download-pdf-btn" class="w-full sm:w-auto text-white font-bold py-3 px-6 rounded-lg bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700 transition-all">Baixar Relatório em PDF</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Dashboard -->
        <div id="dashboard-content-wrapper" class="hidden-section">
            <section id="dashboard" class="scroll-mt-16">
                 <div class="text-left mb-12">
                    <h1 class="text-4xl font-extrabold text-slate-800">Painel de Controle</h1>
                    <p class="text-lg text-slate-600">Bem-vindo(a) de volta, <span id="dashboard-username" class="font-bold text-indigo-600"></span>!</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div class="bg-white p-6 rounded-xl shadow-lg col-span-1 md:col-span-2">
                        <h3 class="text-xl font-bold mb-4 text-slate-700">Meus Resultados do Quiz</h3>
                        <div id="dashboard-quiz-results" class="text-slate-600 space-y-4"></div>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-xl font-bold mb-4 text-slate-700">Perfil</h3>
                        <div class="space-y-3">
                             <div><p class="text-sm text-slate-500">Nome</p><p id="profile-username" class="font-semibold"></p></div>
                            <div><p class="text-sm text-slate-500">Membro desde</p><p id="profile-member-since" class="font-semibold"></p></div>
                            <button class="w-full mt-4 text-sm bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 transition-colors">Editar Perfil</button>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <footer class="bg-slate-800 text-white mt-16 md:mt-24">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-6 text-center text-sm">
            <p>&copy; 2024 Guia Interativo de Formatação. Todos os direitos reservados.</p>
        </div>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', function () {
        // --- STATE & DATA ---
        let state = {
            isLoggedIn: false,
            currentUser: null,
            currentView: 'main' // 'main' or 'dashboard'
        };
        let users = {}; // Simulated user database: { username: { password: '...', joined: '...', quizHistory: [] } }

        // --- DOM ELEMENTS ---
        const authModal = document.getElementById('auth-modal');
        const authModalContent = document.getElementById('auth-modal-content');
        const loginView = document.getElementById('login-view');
        const registerView = document.getElementById('register-view');
        
        const mainContentWrapper = document.getElementById('main-content-wrapper');
        const dashboardContentWrapper = document.getElementById('dashboard-content-wrapper');

        // --- AUTH & VIEW MANAGEMENT ---
        const openAuthModal = (view = 'login') => {
            document.getElementById('login-error').classList.add('hidden');
            document.getElementById('register-error').classList.add('hidden');
            switchModalView(view);
            authModal.classList.remove('hidden');
            authModal.classList.add('flex');
            setTimeout(() => {
                authModalContent.classList.remove('scale-95', 'opacity-0');
            }, 10);
        };
        
        const closeAuthModal = () => {
            authModalContent.classList.add('scale-95', 'opacity-0');
            setTimeout(() => authModal.classList.add('hidden'), 200);
        };

        const switchModalView = (view) => {
            loginView.classList.toggle('active', view === 'login');
            loginView.classList.toggle('hidden', view !== 'login');
            registerView.classList.toggle('active', view === 'register');
            registerView.classList.toggle('hidden', view !== 'register');
        };
        
        const handleLogin = (e) => {
            e.preventDefault();
            const username = document.getElementById('login-username').value.trim();
            const password = document.getElementById('login-password').value;
            const errorEl = document.getElementById('login-error');

            if (users[username] && users[username].password === password) {
                state.isLoggedIn = true;
                state.currentUser = username;
                state.currentView = 'dashboard';
                updateUI();
                closeAuthModal();
            } else {
                errorEl.textContent = 'Usuário ou senha inválidos.';
                errorEl.classList.remove('hidden');
            }
        };
        
        const handleRegister = (e) => {
             e.preventDefault();
            const username = document.getElementById('register-username').value.trim();
            const password = document.getElementById('register-password').value;
            const errorEl = document.getElementById('register-error');

            if (!username || !password) {
                 errorEl.textContent = 'Por favor, preencha todos os campos.';
                 errorEl.classList.remove('hidden');
                 return;
            }
            if (users[username]) {
                errorEl.textContent = 'Este nome de usuário já existe.';
                errorEl.classList.remove('hidden');
            } else {
                users[username] = {
                    password: password,
                    joined: new Date(),
                    quizHistory: []
                };
                // Automatically log in after registration
                state.isLoggedIn = true;
                state.currentUser = username;
                state.currentView = 'dashboard';
                updateUI();
                closeAuthModal();
            }
        };

        const handleLogout = () => {
            state.isLoggedIn = false;
            state.currentUser = null;
            state.currentView = 'main';
            updateUI();
        };

        const updateUI = () => {
            const isDashboard = state.currentView === 'dashboard' && state.isLoggedIn;
            
            // Toggle main content and dashboard visibility
            mainContentWrapper.classList.toggle('hidden-section', isDashboard);
            dashboardContentWrapper.classList.toggle('hidden-section', !isDashboard);

            // Update Nav buttons
            document.getElementById('login-nav-btn').classList.toggle('hidden', state.isLoggedIn);
            document.getElementById('mobile-login-btn').classList.toggle('hidden', state.isLoggedIn);
            document.getElementById('logout-nav-btn').classList.toggle('hidden', !state.isLoggedIn);
            document.getElementById('mobile-logout-btn').classList.toggle('hidden', !state.isLoggedIn);

            if (isDashboard) {
                document.getElementById('dashboard-username').textContent = state.currentUser;
                document.getElementById('profile-username').textContent = state.currentUser;
                document.getElementById('profile-member-since').textContent = users[state.currentUser].joined.toLocaleDateString('pt-BR');
                renderQuizHistory();
            } else {
                 document.getElementById('quiz-subtitle').textContent = "Faça login para salvar seu progresso e iniciar o quiz.";
            }
            
            if(state.currentView === 'main') window.scrollTo(0,0);
        };
        
        const renderQuizHistory = () => {
            const historyContainer = document.getElementById('dashboard-quiz-results');
            const userHistory = users[state.currentUser].quizHistory;

            if (userHistory.length === 0) {
                 historyContainer.innerHTML = `<p>Você ainda não completou nenhum quiz. <a href="#" id="go-to-quiz-link" class="font-bold text-indigo-600 hover:underline">Faça o quiz agora!</a></p>`;
                 document.getElementById('go-to-quiz-link').addEventListener('click', (e) => {
                     e.preventDefault();
                     state.currentView = 'main';
                     updateUI();
                     setTimeout(() => document.getElementById('quiz').scrollIntoView(), 100);
                 });
            } else {
                historyContainer.innerHTML = '';
                userHistory.forEach((result, index) => {
                    const resultCard = document.createElement('div');
                    resultCard.className = 'p-4 border rounded-lg bg-slate-50';
                    resultCard.innerHTML = `
                        <div class="flex justify-between items-center">
                            <p class="font-bold">Quiz #${index + 1}</p>
                            <p class="text-sm text-slate-500">${result.date}</p>
                        </div>
                        <p class="mt-2">Pontuação: <span class="font-semibold text-indigo-600">${result.score}/${result.total} (${result.percentage}%)</span></p>
                        <p class="text-sm mt-1">${result.feedback}</p>
                    `;
                    historyContainer.appendChild(resultCard);
                });
            }
        };
        
        // --- EVENT LISTENERS ---
        document.getElementById('login-nav-btn').addEventListener('click', () => state.isLoggedIn ? updateUI() : openAuthModal('login'));
        document.getElementById('mobile-login-btn').addEventListener('click', () => state.isLoggedIn ? updateUI() : openAuthModal('login'));
        document.getElementById('logout-nav-btn').addEventListener('click', handleLogout);
        document.getElementById('mobile-logout-btn').addEventListener('click', handleLogout);

        document.getElementById('home-link').addEventListener('click', (e) => {
            e.preventDefault();
            state.currentView = 'main';
            updateUI();
        });
        
        // Modal events
        document.getElementById('close-modal-btn').addEventListener('click', closeAuthModal);
        document.getElementById('close-modal-btn-register').addEventListener('click', closeAuthModal);
        authModal.addEventListener('click', (e) => { if (e.target === authModal) closeAuthModal(); });
        document.getElementById('show-register-link').addEventListener('click', (e) => { e.preventDefault(); switchModalView('register'); });
        document.getElementById('show-login-link').addEventListener('click', (e) => { e.preventDefault(); switchModalView('login'); });
        document.getElementById('login-form').addEventListener('submit', handleLogin);
        document.getElementById('register-form').addEventListener('submit', handleRegister);

        // Mobile menu
        document.getElementById('mobile-menu-button').addEventListener('click', () => document.getElementById('mobile-menu').classList.toggle('hidden'));
        
        // --- SCROLLSPY & NAVIGATION ---
        const navLinks = document.querySelectorAll('.main-nav-link');
        const sections = document.querySelectorAll('#main-content-wrapper section');
        const observer = new IntersectionObserver((entries) => {
             entries.forEach(entry => {
                if (entry.isIntersecting) {
                    navLinks.forEach(link => {
                        link.classList.toggle('active', link.getAttribute('href').substring(1) === entry.target.id);
                    });
                }
            });
        }, { root: null, rootMargin: '0px', threshold: 0.4 });
        sections.forEach(section => observer.observe(section));
        
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                state.currentView = 'main';
                updateUI();
                setTimeout(() => {
                    const targetElement = document.querySelector(this.getAttribute('href'));
                    if (targetElement) {
                        targetElement.scrollIntoView({ behavior: 'smooth' });
                         document.getElementById('mobile-menu').classList.add('hidden');
                    }
                }, 100);
            });
        });

        // --- CHART.JS ---
        new Chart(document.getElementById('storageChart').getContext('2d'), {
            type: 'bar',
            data: { labels: ['Kilobyte (KB)', 'Megabyte (MB)', 'Gigabyte (GB)', 'Terabyte (TB)', 'Petabyte (PB)'], datasets: [{ label: 'Tamanho em Bytes', data: [1024, 1024**2, 1024**3, 1024**4, 1024**5], backgroundColor: ['#c7d2fe', '#a5b4fc', '#818cf8', '#6366f1', '#4f46e5'], borderColor: '#312e81', borderWidth: 1 }] },
            options: { responsive: true, maintainAspectRatio: false, scales: { y: { type: 'logarithmic', title: { display: true, text: 'Tamanho em Bytes (Escala Logarítmica)' }}}, plugins: { legend: { display: false } } }
        });

        // --- QUIZ LOGIC ---
        const quizData = [ /* quizData array remains unchanged */ 
        // Perguntas iniciais. Elas serão carregadas do localStorage se existirem.
        const initialQuestions = [
            // HARDWARE (17 Questões)
            { id: 1, area: "Hardware", question: "Qual o acrônimo para 'Unidade Central de Processamento'?", options: ["GPU", "RAM", "CPU", "SSD"], answer: "CPU" },
            { id: 2, area: "Hardware", question: "Qual componente armazena dados temporariamente para acesso rápido pela CPU?", options: ["HD", "SSD", "RAM", "ROM"], answer: "RAM" },
            { id: 3, area: "Hardware", question: "Um disco rígido (HD) é um tipo de memória...", options: ["volátil", "cache", "primária", "secundária"], answer: "secundária" },
            { id: 4, area: "Hardware", question: "Qual dispositivo de saída é usado para exibir imagens?", options: ["Teclado", "Impressora", "Monitor", "Mouse"], answer: "Monitor" },
            { id: 5, area: "Hardware", question: "Qual porta é comumente usada para conectar periféricos como pen drives e impressoras?", options: ["HDMI", "VGA", "USB", "Ethernet"], answer: "USB" },
            { id: 6, area: "Hardware", question: "A BIOS é um firmware armazenado em qual tipo de memória?", options: ["RAM", "ROM", "SSD", "HD"], answer: "ROM" },
            { id: 7, area: "Hardware", question: "Qual componente é responsável por gerar as imagens em um monitor?", options: ["CPU", "GPU", "RAM", "Placa Mãe"], answer: "GPU" },
            { id: 8, area: "Hardware", question: "O que significa SSD?", options: ["Solid State Drive", "Super Speed Disk", "Software Storage Device", "System Service Drive"], answer: "Solid State Drive" },
            { id: 9, area: "Hardware", question: "Qual o nome da principal placa de circuito do computador?", options: ["Placa de Vídeo", "Placa de Rede", "Placa Mãe", "Placa de Som"], answer: "Placa Mãe" },
            { id: 10, area: "Hardware", question: "Qual dispositivo é usado para digitalizar documentos e imagens?", options: ["Impressora", "Plotter", "Scanner", "Projetor"], answer: "Scanner" },
            { id: 11, area: "Hardware", question: "Um microfone é um dispositivo de...", options: ["saída", "entrada", "processamento", "armazenamento"], answer: "entrada" },
            { id: 12, area: "Hardware", question: "Qual tipo de impressora usa toner para imprimir?", options: ["Jato de Tinta", "Matricial", "Laser", "Térmica"], answer: "Laser" },
            { id: 13, area: "Hardware", question: "O que é um 'cooler' no computador?", options: ["Dispositivo de som", "Ventoinha para resfriamento", "Unidade de medida de temperatura", "Tipo de memória"], answer: "Ventoinha para resfriamento" },
            { id: 14, area: "Hardware", question: "Qual componente fornece energia para todos os outros componentes do computador?", options: ["Estabilizador", "Bateria", "Fonte de Alimentação", "No-break"], answer: "Fonte de Alimentação" },
            { id: 15, area: "Hardware", question: "PCI Express é um tipo de slot para...", options: ["RAM", "HD", "Placa de Vídeo", "Processador"], answer: "Placa de Vídeo" },
            { id: 16, area: "Hardware", question: "Qual a função de um no-break?", options: ["Aumentar a velocidade da internet", "Proteger contra vírus", "Fornecer energia temporária em caso de queda de luz", "Otimizar o desempenho da CPU"], answer: "Fornecer energia temporária em caso de queda de luz" },
            { id: 17, area: "Hardware", question: "O que é um 'byte'?", options: ["Uma unidade de CPU", "Oito bits", "Um tipo de vírus", "Um conector de placa mãe"], answer: "Oito bits" },

            // SOFTWARE & SISTEMAS OPERACIONAIS (17 Questões)
            { id: 18, area: "Software & Sistemas Operacionais", question: "Qual destes é um sistema operacional de código aberto?", options: ["Windows", "macOS", "Linux", "iOS"], answer: "Linux" },
            { id: 19, area: "Software & Sistemas Operacionais", question: "Qual software é usado para criar e editar documentos de texto?", options: ["Excel", "PowerPoint", "Word", "Outlook"], answer: "Word" },
            { id: 20, area: "Software & Sistemas Operacionais", question: "Um 'firewall' tem como principal função...", options: ["Acelerar a internet", "Proteger a rede contra acessos não autorizados", "Organizar arquivos", "Compactar dados"], answer: "Proteger a rede contra acessos não autorizados" },
            { id: 21, area: "Software & Sistemas Operacionais", question: "Qual o sistema operacional mais utilizado em smartphones?", options: ["Windows Phone", "iOS", "Android", "BlackBerry OS"], answer: "Android" },
            { id: 22, area: "Software & Sistemas Operacionais", question: "O que é um 'driver'?", options: ["Um tipo de vírus", "Um programa que permite ao SO interagir com um hardware", "Um software de navegação", "Um componente de rede"], answer: "Um programa que permite ao SO interagir com um hardware" },
            { id: 23, area: "Software & Sistemas Operacionais", question: "Qual atalho de teclado é usado para copiar um item?", options: ["Ctrl+X", "Ctrl+V", "Ctrl+C", "Ctrl+Z"], answer: "Ctrl+C" },
            { id: 24, area: "Software & Sistemas Operacionais", question: "No Windows, qual aplicativo é usado para gerenciar arquivos e pastas?", options: ["Painel de Controle", "Gerenciador de Tarefas", "Explorador de Arquivos", "Prompt de Comando"], answer: "Explorador de Arquivos" },
            { id: 25, area: "Software & Sistemas Operacionais", question: "Qual o principal objetivo de um antivírus?", options: ["Otimizar o sistema", "Proteger contra softwares maliciosos", "Compactar arquivos", "Navegar na internet"], answer: "Proteger contra softwares maliciosos" },
            { id: 26, area: "Software & Sistemas Operacionais", question: "Software proprietário é aquele que...", options: ["Pode ser modificado livremente", "Tem seu código fonte aberto", "É vendido sob licença de uso", "Não precisa de instalação"], answer: "É vendido sob licença de uso" },
            { id: 27, area: "Software & Sistemas Operacionais", question: "Qual destas NÃO é uma função de um sistema operacional?", options: ["Gerenciamento de memória", "Gerenciamento de processos", "Criação de gráficos 3D", "Interface com o usuário"], answer: "Criação de gráficos 3D" },
            { id: 28, area: "Software & Sistemas Operacionais", question: "O que é 'malware'?", options: ["Um tipo de hardware avançado", "Software malicioso", "Um erro de programação", "Um termo para internet lenta"], answer: "Software malicioso" },
            { id: 29, area: "Software & Sistemas Operacionais", question: "Em um sistema operacional, o que é um 'ícone'?", options: ["Um tipo de arquivo executável", "Uma representação gráfica de um programa ou arquivo", "Um comando de terminal", "Uma unidade de medida"], answer: "Uma representação gráfica de um programa ou arquivo" },
            { id: 30, area: "Software & Sistemas Operacionais", question: "Qual o nome do software que traduz o código fonte de um programa para código de máquina?", options: ["Editor de texto", "Navegador", "Compilador", "Processador de texto"], answer: "Compilador" },
            { id: 31, area: "Software & Sistemas Operacionais", question: "O que é 'multitarefa' em um sistema operacional?", options: ["Capacidade de rodar um único programa muito rápido", "Capacidade de executar vários programas simultaneamente", "Capacidade de conectar a várias redes", "Capacidade de processar apenas um tipo de dado"], answer: "Capacidade de executar vários programas simultaneamente" },
            { id: 32, area: "Software & Sistemas Operacionais", question: "Para que serve a tecla 'Print Screen'?", options: ["Imprimir o documento atual", "Tirar uma foto da tela", "Apagar arquivos", "Fechar um programa"], answer: "Tirar uma foto da tela" },
            { id: 33, area: "Software & Sistemas Operacionais", question: "Qual a extensão padrão para arquivos de texto simples?", options: [".doc", ".pdf", ".txt", ".exe"], answer: ".txt" },
            { id: 34, area: "Software & Sistemas Operacionais", question: "Um 'loop infinito' é um problema comum em...", options: ["Hardware", "Redes", "Programação", "Armazenamento"], answer: "Programação" },

            // REDES & INTERNET (16 Questões)
            { id: 35, area: "Redes & Internet", question: "O que significa 'HTTP'?", options: ["HyperText Transfer Protocol", "High-Tech Transfer Program", "Home Tool Transfer Process", "Hyperlink Texting Protocol"], answer: "HyperText Transfer Protocol" },
            { id: 36, area: "Redes & Internet", question: "Qual o nome do dispositivo que conecta múltiplas redes locais entre si e à internet?", options: ["Switch", "Hub", "Modem", "Roteador"], answer: "Roteador" },
            { id: 37, area: "Redes & Internet", question: "Um endereço IP (Internet Protocol) serve para...", options: ["Identificar um site na internet", "Identificar um dispositivo em uma rede", "Armazenar senhas", "Aumentar a velocidade de download"], answer: "Identificar um dispositivo em uma rede" },
            { id: 38, area: "Redes & Internet", question: "O que é 'phishing'?", options: ["Um tipo de hardware para pesca", "Uma técnica de fraude para roubar informações pessoais", "Um novo protocolo de rede", "Um software de edição de fotos"], answer: "Uma técnica de fraude para roubar informações pessoais" },
            { id: 39, "area": "Redes & Internet", question: "Qual serviço permite enviar e receber mensagens eletrônicas?", options: ["FTP", "SMTP", "E-mail", "DNS"], answer: "E-mail" },
            { id: 40, area: "Redes & Internet", question: "O que significa 'URL'?", options: ["Universal Resource Locator", "Uniform Remote Link", "User Request Language", "Unified Router Login"], answer: "Universal Resource Locator" },
            { id: 41, area: "Redes & Internet", question: "Qual é o principal protocolo para transferência de arquivos na internet?", options: ["HTTP", "TCP", "UDP", "FTP"], answer: "FTP" },
            { id: 42, area: "Redes & Internet", question: "Uma VPN (Rede Virtual Privada) é usada para...", options: ["Aumentar o número de conexões Wi-Fi", "Criar uma conexão segura e privada através de uma rede pública", "Armazenar arquivos na nuvem", "Otimizar o desempenho do computador"], answer: "Criar uma conexão segura e privada através de uma rede pública" },
            { id: 43, area: "Redes & Internet", question: "O que é um 'browser'?", options: ["Um tipo de servidor", "Um programa para navegar na internet", "Um dispositivo de rede", "Um sistema operacional"], answer: "Um programa para navegar na internet" },
            { id: 44, area: "Redes & Internet", question: "HTTPS é uma versão segura de qual protocolo?", options: ["FTP", "HTTP", "SMTP", "DNS"], answer: "HTTP" },
            { id: 45, area: "Redes & Internet", question: "Qual o termo para uma rede de computadores dentro de uma área geográfica limitada (ex: um escritório)?", options: ["WAN", "LAN", "MAN", "GAN"], answer: "LAN" },
            { id: 46, area: "Redes & Internet", question: "Um 'servidor DNS' é responsável por...", options: ["Distribuir endereços IP", "Traduzir nomes de domínio para endereços IP", "Hospedar websites", "Gerenciar o tráfego de e-mails"], answer: "Traduzir nomes de domínio para endereços IP" },
            { id: 47, area: "Redes & Internet", question: "Qual o principal meio de comunicação utilizado pela internet?", options: ["Rede Wi-Fi", "Cabos de rede", "Ondas de rádio", "Fibras ópticas"], answer: "Fibras ópticas" },
            { id: 48, area: "Redes & Internet", question: "O que é 'spam' em e-mail?", options: ["Mensagens importantes", "E-mails indesejados em massa", "Anexos de arquivo", "Notificações de sistema"], answer: "E-mails indesejados em massa" },
            { id: 49, area: "Redes & Internet", question: "Qual dos seguintes é um exemplo de navegador de internet?", options: ["Microsoft Word", "Google Chrome", "Adobe Photoshop", "Windows Explorer"], answer: "Google Chrome" },
            { id: 50, area: "Redes & Internet", question: "Uma 'URL' é usada para...", options: ["Identificar um usuário", "Localizar um recurso na internet", "Conectar a um servidor", "Compactar arquivos"], answer: "Localizar um recurso na internet" }
        ];

        let currentQuestionIndex = 0;
        let userAnswers = new Array(quizData.length).fill(null);
        
        const startQuizBtn = document.getElementById('start-quiz-btn');
        const quizStartScreen = document.getElementById('quiz-start-screen');
        const quizQuestionScreen = document.getElementById('quiz-question-screen');
        const quizResultsScreen = document.getElementById('quiz-results-screen');
        
        const startQuiz = () => {
            if (!state.isLoggedIn) {
                openAuthModal('login');
                return;
            }
            document.getElementById('quiz-subtitle').textContent = "Complete o quiz para avaliar sua compreensão.";
            quizStartScreen.classList.add('hidden');
            quizQuestionScreen.classList.remove('hidden');
            quizResultsScreen.classList.add('hidden');
            currentQuestionIndex = 0;
            userAnswers.fill(null);
            showQuestion();
        };

        const showQuestion = () => {
            const questionData = quizData[currentQuestionIndex];
            document.getElementById('quiz-question').textContent = questionData.question;
            const optionsEl = document.getElementById('quiz-options');
            optionsEl.innerHTML = '';
            
            const videoContainer = document.getElementById('video-link-container');
            videoContainer.innerHTML = '';
            if (questionData.videoUrl) {
                videoContainer.innerHTML = `<a href="${questionData.videoUrl}" target="_blank" class="inline-flex items-center text-sm font-medium text-indigo-600 hover:text-purple-800"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"/></svg>Precisa de ajuda?</a>`;
            }

            const options = questionData.type === 'boolean' ? ['Verdadeiro', 'Falso'] : questionData.options;
            options.forEach(optionText => {
                const valueToStore = questionData.type === 'boolean' ? (optionText === 'Verdadeiro') : optionText;
                const button = document.createElement('button');
                button.textContent = optionText;
                button.className = `w-full text-left p-4 border rounded-lg quiz-option ${userAnswers[currentQuestionIndex] === valueToStore ? 'selected' : ''}`;
                button.onclick = () => selectAnswer(valueToStore);
                optionsEl.appendChild(button);
            });
            updateQuizNavigation();
        };
        
        const selectAnswer = (answer) => {
            userAnswers[currentQuestionIndex] = answer;
            document.getElementById('quiz-message').textContent = '';
            showQuestion();
            document.getElementById('next-question-btn').disabled = false;
        };

        const nextQuestion = () => {
            if (userAnswers[currentQuestionIndex] === null) {
                document.getElementById('quiz-message').textContent = 'Por favor, selecione uma resposta.';
                return;
            }
            if (currentQuestionIndex < quizData.length - 1) {
                currentQuestionIndex++;
                showQuestion();
            } else {
                showResults();
            }
        };

        const showResults = () => {
            quizQuestionScreen.classList.add('hidden');
            quizResultsScreen.classList.remove('hidden');
            
            const studentName = state.currentUser;
            document.getElementById('results-student-name').textContent = studentName;
            
            let score = 0;
            userAnswers.forEach((answer, index) => { if(answer === quizData[index].answer) score++; });
            const percentage = Math.round((score / quizData.length) * 100);
            let feedbackText = 
                percentage >= 90 ? "Excelente! Você é um mestre da formatação." :
                percentage >= 70 ? "Muito bom! Você tem um ótimo conhecimento." :
                percentage >= 50 ? "Bom trabalho! Continue estudando." :
                "Não desanime. Reveja os conceitos e tente novamente!";
            
            document.getElementById('quiz-score').textContent = score;
            document.getElementById('quiz-total').textContent = quizData.length;
            document.getElementById('quiz-percentage').textContent = `${percentage}%`;
            document.getElementById('quiz-feedback').textContent = feedbackText;

            if (state.isLoggedIn) {
                users[state.currentUser].quizHistory.push({
                    score: score, total: quizData.length, percentage: percentage,
                    feedback: feedbackText, date: new Date().toLocaleDateString('pt-BR')
                });
            }
        };

        const restartQuiz = () => {
            quizResultsScreen.classList.add('hidden');
            quizStartScreen.classList.remove('hidden');
        };
        
        const updateQuizNavigation = () => {
             document.getElementById('quiz-progress').textContent = `Pergunta ${currentQuestionIndex + 1} de ${quizData.length}`;
             document.getElementById('quiz-progress-bar').style.width = `${((currentQuestionIndex + 1) / quizData.length) * 100}%`;
             document.getElementById('prev-question-btn').disabled = currentQuestionIndex === 0;
             document.getElementById('next-question-btn').disabled = userAnswers[currentQuestionIndex] === null;
             document.getElementById('next-question-btn').textContent = currentQuestionIndex === quizData.length - 1 ? 'Finalizar' : 'Próxima';
        };

        startQuizBtn.addEventListener('click', startQuiz);
        document.getElementById('restart-quiz-btn').addEventListener('click', restartQuiz);
        document.getElementById('next-question-btn').addEventListener('click', nextQuestion);
        document.getElementById('prev-question-btn').addEventListener('click', () => { if (currentQuestionIndex > 0) { currentQuestionIndex--; showQuestion(); }});
        
        document.getElementById('download-pdf-btn').addEventListener('click', () => {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            const studentName = state.currentUser;
            const score = document.getElementById('quiz-score').textContent;
            const total = document.getElementById('quiz-total').textContent;
            
            doc.setFontSize(22);
            doc.text("Relatório de Desempenho do Quiz", 105, 20, { align: 'center' });
            doc.setFontSize(12);
            doc.text(`Aluno(a): ${studentName}`, 20, 40);
            doc.text(`Pontuação: ${score} de ${total}`, 20, 50);

            let y = 70;
            userAnswers.forEach((answer, index) => {
                const q = quizData[index];
                if (y > 270) { doc.addPage(); y = 20; }
                doc.setFontSize(10);
                doc.setTextColor(answer === q.answer ? '#166534' : '#991b1b');
                doc.text(`${index + 1}. ${q.question}`, 20, y, { maxWidth: 170 });
                y += doc.getTextDimensions(`${index + 1}. ${q.question}`, { maxWidth: 170 }).h + 2;
                doc.setTextColor(0);
                doc.text(`- Sua resposta: ${answer}`, 25, y);
                y += 5;
                if(answer !== q.answer) {
                   doc.text(`- Resposta correta: ${q.answer}`, 25, y);
                   y+= 5;
                }
                y+= 5;
            });
            doc.save(`relatorio-quiz-${studentName.replace(/\s+/g, '_')}.pdf`);
        });

    });
    </script>
</body>
</html>
