<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guia Interativo de Formata√ß√£o de Computadores</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals & Soft Teal -->
    <!-- Application Structure Plan: A multi-section single-page application (SPA) designed as a guided learning journey. The structure uses a top navigation bar for easy access to thematic sections. This non-linear, task-oriented structure was chosen over a simple report layout to enhance user engagement. The core of the application is the interactive quiz, which turns passive learning into an active assessment. -->
    <!-- Visualization & Content Choices: HTML table for comparisons, step-by-step diagram for process, Chart.js bar chart for data units, and interactive quiz form. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body { font-family: 'Inter', sans-serif; scroll-behavior: smooth; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .nav-link { transition: color 0.3s, border-bottom-color 0.3s; }
        .nav-link.active { color: #0d9488; border-bottom-color: #0d9488; }
        .quiz-option { transition: background-color 0.2s; }
        .quiz-option:hover { background-color: #f0f9ff; }
        .quiz-option.selected { background-color: #e0f2fe; border-color: #38bdf8; }
        .quiz-option.correct { background-color: #dcfce7; border-color: #22c55e; }
        .quiz-option.incorrect { background-color: #fee2e2; border-color: #ef4444; }
        .chart-container { position: relative; width: 100%; max-width: 800px; margin-left: auto; margin-right: auto; height: 350px; max-height: 500px; }
        @media (min-width: 768px) { .chart-container { height: 450px; } }
        /* Style for disabled button */
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <header class="bg-white/80 backdrop-blur-lg sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex-shrink-0">
                    <a href="#inicio" class="text-xl font-bold text-teal-700">Guia de Formata√ß√£o</a>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#conceitos" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-slate-600 hover:text-teal-600 border-b-2 border-transparent">Conceitos</a>
                        <a href="#processo" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-slate-600 hover:text-teal-600 border-b-2 border-transparent">Processo</a>
                        <a href="#seguranca" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-slate-600 hover:text-teal-600 border-b-2 border-transparent">Seguran√ßa</a>
                        <a href="#quiz" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-slate-600 hover:text-teal-600 border-b-2 border-transparent">Quiz Interativo</a>
                    </div>
                </div>
                <div class="md:hidden">
                    <button id="mobile-menu-button" class="inline-flex items-center justify-center p-2 rounded-md text-slate-500 hover:text-white hover:bg-teal-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-teal-600 focus:ring-white">
                        <span class="sr-only">Abrir menu principal</span>
                        <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                </div>
            </div>
            <div id="mobile-menu" class="hidden md:hidden">
                <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                    <a href="#conceitos" class="nav-link block px-3 py-2 rounded-md text-base font-medium text-slate-600 hover:text-teal-600">Conceitos</a>
                    <a href="#processo" class="nav-link block px-3 py-2 rounded-md text-base font-medium text-slate-600 hover:text-teal-600">Processo</a>
                    <a href="#seguranca" class="nav-link block px-3 py-2 rounded-md text-base font-medium text-slate-600 hover:text-teal-600">Seguran√ßa</a>
                    <a href="#quiz" class="nav-link block px-3 py-2 rounded-md text-base font-medium text-slate-600 hover:text-teal-600">Quiz Interativo</a>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">

        <!-- Se√ß√£o de Introdu√ß√£o -->
        <section id="inicio" class="text-center mb-16 md:mb-24">
            <h1 class="text-4xl md:text-5xl font-extrabold text-teal-700 mb-4">Desvendando a Formata√ß√£o</h1>
            <p class="max-w-3xl mx-auto text-lg text-slate-600">Um guia essencial para otimizar o desempenho, garantir a seguran√ßa e entender o ciclo de vida dos dados no seu computador.</p>
        </section>

        <!-- Se√ß√£o de Conceitos -->
        <section id="conceitos" class="mb-16 md:mb-24 scroll-mt-16">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold mb-2">Conceitos Fundamentais</h2>
                <p class="text-md text-slate-500">Tudo come√ßa com o entendimento do "o qu√™" e do "porqu√™". Explore os conceitos b√°sicos que definem a formata√ß√£o.</p>
            </div>

            <div class="bg-white p-8 rounded-xl shadow-lg mb-12">
                <h3 class="text-2xl font-semibold mb-4 text-teal-700">O que √© Formata√ß√£o?</h3>
                <p class="text-slate-600 mb-6">A formata√ß√£o √© um processo t√©cnico que remove todos os dados de um disco (HD ou SSD) e o prepara para um novo uso. √â uma etapa crucial na reinstala√ß√£o de um sistema operacional (como Windows, macOS ou Linux), restaurando o computador a um estado inicial, como se fosse rec√©m-sa√≠do da f√°brica. Este procedimento n√£o s√≥ libera espa√ßo, mas tamb√©m resolve problemas de desempenho e seguran√ßa.</p>
                <div class="grid md:grid-cols-3 gap-6 text-center">
                    <div class="bg-slate-100 p-4 rounded-lg">
                        <h4 class="font-semibold">üßπ Limpeza Total</h4>
                        <p class="text-sm text-slate-500">Apaga todos os dados e configura o disco para receber novas informa√ß√µes.</p>
                    </div>
                    <div class="bg-slate-100 p-4 rounded-lg">
                        <h4 class="font-semibold">‚öôÔ∏è Prepara√ß√£o do Dispositivo</h4>
                        <p class="text-sm text-slate-500">Deixa HDs e SSDs prontos para a instala√ß√£o de um novo sistema.</p>
                    </div>
                    <div class="bg-slate-100 p-4 rounded-lg">
                        <h4 class="font-semibold">‚ú® Sistema Novo em Folha</h4>
                        <p class="text-sm text-slate-500">Reinstala o sistema operacional, devolvendo a agilidade original.</p>
                    </div>
                </div>
            </div>

            <div class="bg-white p-8 rounded-xl shadow-lg mb-12">
                <h3 class="text-2xl font-semibold mb-4 text-teal-700">Formata√ß√£o R√°pida vs. Completa</h3>
                <p class="text-slate-600 mb-6">Existem dois tipos principais de formata√ß√£o. Compreender a diferen√ßa √© crucial para garantir a seguran√ßa e a integridade das suas informa√ß√µes. A escolha errada pode deixar seus dados vulner√°veis.</p>
                <div class="overflow-x-auto">
                    <table class="w-full text-left border-collapse">
                        <thead class="bg-slate-100">
                            <tr>
                                <th class="p-4 font-semibold border-b border-slate-200">Caracter√≠stica</th>
                                <th class="p-4 font-semibold border-b border-slate-200">Formata√ß√£o R√°pida</th>
                                <th class="p-4 font-semibold border-b border-slate-200">Formata√ß√£o Completa</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="hover:bg-slate-50">
                                <td class="p-4 border-b border-slate-200 font-medium">M√©todo</td>
                                <td class="p-4 border-b border-slate-200">Apaga apenas os √≠ndices dos arquivos.</td>
                                <td class="p-4 border-b border-slate-200">Apaga os √≠ndices e sobrescreve os dados.</td>
                            </tr>
                            <tr class="hover:bg-slate-50">
                                <td class="p-4 border-b border-slate-200 font-medium">Velocidade</td>
                                <td class="p-4 border-b border-slate-200">Muito mais r√°pida.</td>
                                <td class="p-4 border-b border-slate-200">Consideravelmente mais demorada.</td>
                            </tr>
                             <tr class="hover:bg-slate-50">
                                <td class="p-4 border-b border-slate-200 font-medium">Seguran√ßa</td>
                                <td class="p-4 border-b border-slate-200">Baixa. Dados podem ser recuperados.</td>
                                <td class="p-4 border-b border-slate-200">Alta. Recupera√ß√£o quase imposs√≠vel.</td>
                            </tr>
                            <tr class="hover:bg-slate-50">
                                <td class="p-4 border-b border-slate-200 font-medium">Verifica√ß√£o de Disco</td>
                                <td class="p-4 border-b border-slate-200">N√£o verifica a integridade f√≠sica.</td>
                                <td class="p-4 border-b border-slate-200">Verifica o disco por setores defeituosos.</td>
                            </tr>
                            <tr class="hover:bg-slate-50">
                                <td class="p-4 font-medium">Uso Ideal</td>
                                <td class="p-4">Reinstalar o SO rapidamente em um PC pessoal.</td>
                                <td class="p-4">Vender/doar o PC, ou se h√° suspeita de problemas no disco.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="bg-white p-8 rounded-xl shadow-lg">
                 <h3 class="text-2xl font-semibold mb-4 text-teal-700">Unidades de Armazenamento Digital</h3>
                <p class="text-slate-600 mb-6">Do menor pulso el√©trico ao maior data center, os dados s√£o medidos em unidades que crescem exponencialmente. O gr√°fico abaixo ilustra a escala massiva, mostrando quantos da unidade anterior cabem em cada nova unidade (escala logar√≠tmica).</p>
                <div class="chart-container">
                    <canvas id="storageChart"></canvas>
                </div>
            </div>

        </section>

        <!-- Se√ß√£o de Processo -->
        <section id="processo" class="mb-16 md:mb-24 scroll-mt-16">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold mb-2">O Processo de Formata√ß√£o Segura</h2>
                <p class="text-md text-slate-500">Siga estes passos para garantir uma formata√ß√£o bem-sucedida, sem perda de dados importantes.</p>
            </div>
            
            <div class="relative">
                <div class="absolute left-1/2 -ml-0.5 w-1 h-full bg-teal-200 hidden md:block" aria-hidden="true"></div>
                <div class="space-y-12 md:space-y-16">
                    <!-- Passo 1 -->
                    <div class="relative flex items-start md:items-center md:space-x-8">
                        <div class="flex-shrink-0 w-12 h-12 rounded-full bg-teal-500 text-white flex items-center justify-center font-bold text-lg z-10">1</div>
                        <div class="flex-grow bg-white p-6 rounded-xl shadow-lg">
                            <h4 class="text-xl font-semibold mb-2">Backup de Dados: A Etapa Cr√≠tica</h4>
                            <p class="text-slate-600">Antes de tudo, copie seus arquivos essenciais (fotos, documentos, etc.) para um disco externo ou servi√ßo de nuvem. Esta √© sua √∫nica ap√≥lice de seguro contra a perda permanente de dados.</p>
                        </div>
                    </div>
                    <!-- Passo 2 -->
                    <div class="relative flex items-start md:items-center md:space-x-8">
                        <div class="flex-shrink-0 w-12 h-12 rounded-full bg-teal-500 text-white flex items-center justify-center font-bold text-lg z-10">2</div>
                        <div class="flex-grow bg-white p-6 rounded-xl shadow-lg">
                            <h4 class="text-xl font-semibold mb-2">Reinstala√ß√£o do Sistema Operacional</h4>
                            <p class="text-slate-600">Utilize um pendrive boot√°vel ou DVD com a imagem do sistema operacional (Windows, macOS, Linux) para iniciar o processo de instala√ß√£o ap√≥s a formata√ß√£o do disco.</p>
                        </div>
                    </div>
                    <!-- Passo 3 -->
                    <div class="relative flex items-start md:items-center md:space-x-8">
                        <div class="flex-shrink-0 w-12 h-12 rounded-full bg-teal-500 text-white flex items-center justify-center font-bold text-lg z-10">3</div>
                        <div class="flex-grow bg-white p-6 rounded-xl shadow-lg">
                            <h4 class="text-xl font-semibold mb-2">Instala√ß√£o de Drivers</h4>
                            <p class="text-slate-600">Ap√≥s instalar o SO, instale os drivers do fabricante para todos os componentes de hardware (placa de v√≠deo, som, rede). Isso √© crucial para o bom funcionamento do sistema.</p>
                        </div>
                    </div>
                    <!-- Passo 4 -->
                    <div class="relative flex items-start md:items-center md:space-x-8">
                        <div class="flex-shrink-0 w-12 h-12 rounded-full bg-teal-500 text-white flex items-center justify-center font-bold text-lg z-10">4</div>
                        <div class="flex-grow bg-white p-6 rounded-xl shadow-lg">
                            <h4 class="text-xl font-semibold mb-2">Instala√ß√£o de Programas</h4>
                            <p class="text-slate-600">Instale seus programas essenciais, como navegador de internet, pacote de escrit√≥rio e outros aplicativos que voc√™ usa no dia a dia.</p>
                        </div>
                    </div>
                    <!-- Passo 5 -->
                    <div class="relative flex items-start md:items-center md:space-x-8">
                        <div class="flex-shrink-0 w-12 h-12 rounded-full bg-teal-500 text-white flex items-center justify-center font-bold text-lg z-10">5</div>
                        <div class="flex-grow bg-white p-6 rounded-xl shadow-lg">
                            <h4 class="text-xl font-semibold mb-2">Restaura√ß√£o dos Dados</h4>
                            <p class="text-slate-600">Finalmente, copie os arquivos do seu backup de volta para o computador. Seu sistema est√° agora limpo, otimizado e com seus dados de volta.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Se√ß√£o de Seguran√ßa -->
        <section id="seguranca" class="mb-16 md:mb-24 scroll-mt-16">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold mb-2">Prote√ß√£o Avan√ßada de Dados</h2>
                <p class="text-md text-slate-500">A formata√ß√£o √© apenas o come√ßo. Aprenda a proteger suas informa√ß√µes de forma proativa.</p>
            </div>
            <div class="grid md:grid-cols-1 lg:grid-cols-3 gap-8">
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <h4 class="text-xl font-semibold mb-3 text-teal-700">Backup Automatizado</h4>
                    <p class="text-slate-600">Explore softwares de backup que criam c√≥pias de seguran√ßa programadas. Para dados mais sens√≠veis, use ferramentas que criam "imagens do sistema", permitindo uma restaura√ß√£o completa em caso de necessidade.</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <h4 class="text-xl font-semibold mb-3 text-teal-700">Criptografia de Disco</h4>
                    <p class="text-slate-600">Ap√≥s a formata√ß√£o, ative a criptografia de disco. Ferramentas como BitLocker (Windows) e FileVault (macOS) protegem seus arquivos, tornando-os ileg√≠veis caso o computador seja roubado ou perdido.</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <h4 class="text-xl font-semibold mb-3 text-teal-700">Destrui√ß√£o Segura de Dados</h4>
                    <p class="text-slate-600">Ao vender ou descartar um disco, a formata√ß√£o n√£o basta. Use softwares de "limpeza segura" que sobrescrevem o disco v√°rias vezes. Em casos extremes, a destrui√ß√£o f√≠sica √© a √∫nica garantia.</p>
                </div>
            </div>
        </section>

        <!-- Se√ß√£o do Quiz -->
        <section id="quiz" class="scroll-mt-16">
            <div class="bg-white p-8 rounded-xl shadow-lg">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold mb-2">Teste seus Conhecimentos</h2>
                    <p class="text-md text-slate-500">Complete o quiz para avaliar sua compreens√£o sobre formata√ß√£o e seguran√ßa de dados.</p>
                </div>

                <div id="quiz-container">
                    <div id="quiz-start-screen">
                        <div class="mb-6">
                            <label for="student-name" class="block text-sm font-medium text-slate-700 mb-1">Nome do Aluno(a):</label>
                            <input type="text" id="student-name" name="student-name" class="mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm" placeholder="Digite seu nome completo">
                            <div id="student-name-error" class="text-red-500 text-xs mt-1"></div>
                        </div>
                        <p class="text-center text-slate-600 mb-6">S√£o 44 perguntas para testar seu conhecimento. Clique abaixo para come√ßar!</p>
                        <div class="text-center">
                            <button id="start-quiz-btn" class="bg-teal-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-teal-700 transition-colors">Iniciar Quiz</button>
                        </div>
                    </div>

                    <div id="quiz-question-screen" class="hidden">
                        <div class="text-center mb-4">
                            <p id="quiz-progress" class="text-sm font-medium text-slate-500">Pergunta 1 de 44</p>
                            <div class="w-full bg-slate-200 rounded-full h-2.5 mt-2">
                                <div id="quiz-progress-bar" class="bg-teal-500 h-2.5 rounded-full" style="width: 2.27%"></div>
                            </div>
                             <p id="quiz-attempt-info" class="text-center text-xs text-slate-500 mt-2 mb-1"></p> <!-- Attempt Number Display -->
                        </div>
                        <div id="question-timer-display" class="text-center text-sm text-slate-600 my-3">Tempo: 00:00.000</div>
                        <h3 id="quiz-question" class="text-xl font-semibold text-center my-6"></h3>
                        <div id="quiz-options" class="space-y-4"></div>
                        <div id="quiz-message" class="text-red-500 text-sm text-center mt-4 mb-2 h-5"></div>
                        <div class="mt-8 flex justify-between items-center">
                           <button id="prev-question-btn" class="bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 transition-colors">Anterior</button>
                           <button id="next-question-btn" class="bg-teal-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-teal-700 transition-colors">Pr√≥xima</button>
                        </div>
                    </div>

                    <div id="quiz-results-screen" class="hidden">
                        <h3 class="text-2xl font-bold text-center mb-4">Quiz Finalizado!</h3>
                        <div class="text-center text-lg text-slate-600 mb-6">
                            <p>Aluno(a): <span id="results-student-name" class="font-bold text-teal-700"></span></p>
                            <p>Tentativa N¬∫: <span id="results-attempt-number" class="font-bold"></span></p> <!-- Attempt Number on Results -->
                            <p>Voc√™ acertou <span id="quiz-score" class="font-bold text-teal-600">0</span> de <span id="quiz-total" class="font-bold">44</span> perguntas.</p>
                            <p id="quiz-percentage" class="text-3xl font-bold mt-2 text-teal-500">0%</p>
                        </div>
                        <div id="quiz-feedback" class="text-center text-slate-700 font-medium mb-8"></div>
                        <div class="flex flex-col sm:flex-row justify-center items-center gap-4">
                            <button id="restart-quiz-btn" class="w-full sm:w-auto bg-slate-200 text-slate-700 font-bold py-3 px-6 rounded-lg hover:bg-slate-300 transition-colors">Tentar Novamente</button>
                            <button id="download-pdf-btn" class="w-full sm:w-auto bg-teal-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-teal-700 transition-colors">Baixar Relat√≥rio em PDF</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-slate-800 text-white mt-16 md:mt-24">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-6 text-center text-sm">
            <p>&copy; 2024 Guia Interativo de Formata√ß√£o. Conte√∫do adaptado de "Desvendando a Formata√ß√£o: Um Guia Essencial para seu Computador".</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');

            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
            
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('main section');

            const observerOptions = {
                root: null,
                rootMargin: '0px',
                threshold: 0.4 
            };

            const observer = new IntersectionObserver((entries) => {
                let activeSectionId = null;
                entries.forEach(entry => {
                    if (entry.isIntersecting && entry.intersectionRatio >= 0.4) {
                         activeSectionId = entry.target.id;
                    }
                });

                if (activeSectionId) {
                    navLinks.forEach(link => {
                        link.classList.remove('active');
                        if (link.getAttribute('href').substring(1) === activeSectionId) {
                            link.classList.add('active');
                        }
                    });
                } else {
                    let currentScroll = window.pageYOffset || document.documentElement.scrollTop;
                    let foundActive = false;
                    sections.forEach(section => {
                        if (section.offsetTop <= currentScroll + window.innerHeight * 0.5 && 
                            section.offsetTop + section.offsetHeight > currentScroll + window.innerHeight * 0.2) { 
                            navLinks.forEach(link => {
                                link.classList.remove('active');
                                if (link.getAttribute('href').substring(1) === section.id) {
                                    link.classList.add('active');
                                    foundActive = true;
                                }
                            });
                        }
                    });
                    if (!foundActive) { 
                         navLinks.forEach(link => link.classList.remove('active'));
                         if (currentScroll < sections[0].offsetTop) {
                            const firstNavLink = document.querySelector('.nav-link[href="#inicio"]') || document.querySelector('.nav-link[href="#conceitos"]');
                            if(firstNavLink) firstNavLink.classList.add('active');
                         }
                    }
                }
            }, observerOptions);

            sections.forEach(section => {
                observer.observe(section);
            });
            
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetId = link.getAttribute('href');
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        targetElement.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                    if (mobileMenu.classList.contains('hidden') === false) {
                        mobileMenu.classList.add('hidden');
                    }
                });
            });

            const storageCtx = document.getElementById('storageChart').getContext('2d');
            new Chart(storageCtx, {
                type: 'bar',
                data: {
                    labels: ['Kilobyte (KB)', 'Megabyte (MB)', 'Gigabyte (GB)', 'Terabyte (TB)', 'Petabyte (PB)'],
                    datasets: [{
                        label: 'Fator de Multiplica√ß√£o (base 1024)',
                        data: [1024, 1024*1024, 1024*1024*1024, 1024*1024*1024*1024, 1024*1024*1024*1024*1024],
                        backgroundColor: [
                            'rgba(15, 118, 110, 0.2)',
                            'rgba(13, 148, 136, 0.4)',
                            'rgba(20, 184, 166, 0.6)',
                            'rgba(45, 212, 191, 0.8)',
                            'rgba(99, 222, 207, 1)'
                        ],
                        borderColor: [
                            'rgba(15, 118, 110, 1)',
                            'rgba(13, 148, 136, 1)',
                            'rgba(20, 184, 166, 1)',
                            'rgba(45, 212, 191, 1)',
                            'rgba(99, 222, 207, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            type: 'logarithmic',
                            title: {
                                display: true,
                                text: 'Tamanho em Bytes (Escala Logar√≠tmica)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    let value = context.parsed.y;
                                    if(value >= 1e15) return (value/1e15).toFixed(0) + ' PB (' + (value/1e15).toFixed(2) + ' Quatrilh√µes de Bytes)';
                                    if(value >= 1e12) return (value/1e12).toFixed(0) + ' TB (' + (value/1e12).toFixed(2) + ' Trilh√µes de Bytes)';
                                    if(value >= 1e9) return (value/1e9).toFixed(0) + ' GB (' + (value/1e9).toFixed(2) + ' Bilh√µes de Bytes)';
                                    if(value >= 1e6) return (value/1e6).toFixed(0) + ' MB (' + (value/1e6).toFixed(2) + ' Milh√µes de Bytes)';
                                    if(value >= 1e3) return (value/1e3).toFixed(0) + ' KB (' + value + ' Bytes)';
                                    return value + ' Bytes';
                                }
                            }
                        }
                    }
                }
            });

            const quizData = [
                { question: "Qual √© a defini√ß√£o central da formata√ß√£o de um computador?", options: ["Liberar espa√ßo no disco", "Remover v√≠rus", "Remover todos os dados e preparar o disco para novo uso", "Atualizar o sistema operacional"], answer: "Remover todos os dados e preparar o disco para novo uso" },
                { question: "A formata√ß√£o tem como objetivo principal apenas liberar espa√ßo.", type: "boolean", answer: false },
                { question: "Qual dos seguintes N√ÉO √© um prop√≥sito principal da formata√ß√£o?", options: ["Resolu√ß√£o de problemas de desempenho", "Instalar novos drivers de hardware", "Reinstala√ß√£o do sistema operacional", "Prepara√ß√£o do dispositivo para um novo sistema"], answer: "Instalar novos drivers de hardware" },
                { question: "O que significa 'restaurar o computador a um estado inicial'?", options: ["Desfragmentar o disco", "Limpar o cache do navegador", "Reinstalar o SO, removendo dados e configura√ß√µes anteriores", "Fazer backup dos arquivos"], answer: "Reinstalar o SO, removendo dados e configura√ß√µes anteriores" },
                { question: "A formata√ß√£o √© um processo exclusivamente destrutivo.", type: "boolean", answer: false },
                { question: "Qual a principal caracter√≠stica da Formata√ß√£o R√°pida?", options: ["Sobrescreve todos os dados", "Verifica a integridade do disco", "Apaga apenas os √≠ndices dos arquivos", "√â mais segura que a completa"], answer: "Apaga apenas os √≠ndices dos arquivos" },
                { question: "Qual formata√ß√£o torna a recupera√ß√£o de dados mais dif√≠cil?", options: ["R√°pida", "Completa", "Ambas", "Nenhuma"], answer: "Completa" },
                { question: "Para vender um PC com seguran√ßa, qual formata√ß√£o √© recomendada?", options: ["R√°pida", "Completa", "Tanto faz", "Nenhuma, deve-se destruir o disco"], answer: "Completa" },
                { question: "A Formata√ß√£o R√°pida √© mais demorada que a Completa.", type: "boolean", answer: false },
                { question: "Qual tipo de formata√ß√£o verifica a integridade f√≠sica do disco?", options: ["R√°pida", "Completa", "Ambas", "Nenhuma"], answer: "Completa" },
                { question: "Computador lento e travando constantemente √© um cen√°rio de:", options: ["Falha de hardware", "Problemas de Desempenho", "Falta de mem√≥ria RAM", "V√≠rus"], answer: "Problemas de Desempenho" },
                { question: "Se um antiv√≠rus falha em remover um malware, a solu√ß√£o eficaz √©:", options: ["Desfragmentar o disco", "Atualizar o antiv√≠rus", "Formatar o computador", "Restaurar o sistema"], answer: "Formatar o computador" },
                { question: "Por que formatar um PC antes de do√°-lo?", options: ["Para aumentar seu valor", "Para proteger a privacidade do usu√°rio", "Para instalar jogos", "Para testar o hardware"], answer: "Para proteger a privacidade do usu√°rio" },
                { question: "A 'tela azul da morte' (BSOD) √© um exemplo de:", options: ["V√≠rus", "Problema de desempenho", "Falha de hardware", "Falhas Graves do Sistema"], answer: "Falhas Graves do Sistema" },
                { question: "A formata√ß√£o √© uma solu√ß√£o apenas para problemas de hardware.", type: "boolean", answer: false },
                { question: "Qual √© a etapa mais cr√≠tica no processo de formata√ß√£o?", options: ["Instalar drivers", "Backup de Dados", "Escolher o SO", "Restaurar dados"], answer: "Backup de Dados" },
                { question: "Por que o backup √© considerado uma 'ap√≥lice de seguro'?", options: ["Porque acelera a formata√ß√£o", "Porque protege contra v√≠rus", "Porque garante que arquivos essenciais n√£o sejam perdidos", "Porque melhora o desempenho"], answer: "Porque garante que arquivos essenciais n√£o sejam perdidos" },
                { question: "Ap√≥s instalar o SO, o que deve ser instalado para a funcionalidade completa?", options: ["Apenas jogos", "Apenas o antiv√≠rus", "Drivers e programas do usu√°rio", "Apenas o navegador"], answer: "Drivers e programas do usu√°rio" },
                { question: "Qual a finalidade de um pendrive boot√°vel no processo?", options: ["Para fazer backup", "Para instalar drivers", "Para reinstalar o sistema operacional", "Para verificar a integridade do disco"], answer: "Para reinstalar o sistema operacional" },
                { question: "A restaura√ß√£o dos dados deve ser feita antes da reinstala√ß√£o do SO.", type: "boolean", answer: false },
                { question: "Qual √© a menor unidade de informa√ß√£o em um computador?", options: ["Byte", "Bit", "Kilobyte", "Gigabit"], answer: "Bit" },
                { question: "Um Bit representa qual estado?", options: ["Aberto ou Fechado", "Positivo ou Negativo", "Ligado ou Desligado (0 ou 1)", "Verdadeiro ou Falso"], answer: "Ligado ou Desligado (0 ou 1)" },
                { question: "Quantos bits formam um Byte?", options: ["4", "8", "16", "32"], answer: "8" },
                { question: "Um Byte √© a unidade fundamental para armazenar:", options: ["Um arquivo de v√≠deo", "Um programa completo", "Um √∫nico caractere", "Uma imagem"], answer: "Um √∫nico caractere" },
                { question: "A combina√ß√£o de bits em bytes permite a codifica√ß√£o de todas as informa√ß√µes em um computador.", type: "boolean", answer: true },
                { question: "Qual unidade equivale a 1.024 bytes?", options: ["Megabyte (MB)", "Gigabyte (GB)", "Kilobyte (KB)", "Terabyte (TB)"], answer: "Kilobyte (KB)" },
                { question: "Quantos Kilobytes (KB) comp√µem um Megabyte (MB)?", options: ["1000", "1024", "2048", "512"], answer: "1024" },
                { question: "Filmes, jogos e sistemas operacionais s√£o geralmente medidos em:", options: ["MB", "KB", "TB", "GB"], answer: "GB" },
                { question: "Qual unidade representa aproximadamente 1 trilh√£o de bytes?", options: ["Gigabyte (GB)", "Petabyte (PB)", "Terabyte (TB)", "Megabyte (MB)"], answer: "Terabyte (TB)" },
                { question: "Petabytes (PB) e Exabytes (EB) s√£o unidades usadas para:", options: ["Armazenamento em smartphones", "Disquetes antigos", "Grandes data centers e armazenamento global", "Mem√≥ria RAM de notebooks"], answer: "Grandes data centers e armazenamento global" },
                { question: "Uma m√∫sica MP3 geralmente tem alguns:", options: ["KB", "MB", "GB", "TB"], answer: "MB" },
                { question: "A seguran√ßa dos dados √© primordial apenas durante a formata√ß√£o.", type: "boolean", answer: false },
                { question: "Qual √© a primeira e mais importante pr√°tica de seguran√ßa antes de formatar?", options: ["Instalar um antiv√≠rus", "Realizar um backup completo", "Criptografar o disco", "Desconectar da internet"], answer: "Realizar um backup completo" },
                { question: "Qual dos seguintes N√ÉO √© um m√©todo de backup mencionado?", options: ["Discos r√≠gidos externos", "Servi√ßos de nuvem", "M√≠dias remov√≠veis", "Mem√≥ria RAM"], answer: "Mem√≥ria RAM" },
                { question: "O que s√£o 'imagens do sistema' usadas para backup?", options: ["Cole√ß√µes de fotos do usu√°rio", "C√≥pias exatas de todo o sistema para restaura√ß√£o completa", "Capturas de tela do sistema operacional", "√çcones personalizados do sistema"], answer: "C√≥pias exatas de todo o sistema para restaura√ß√£o completa" },
                { question: "Qual medida de seguran√ßa √© recomendada AP√ìS a reinstala√ß√£o do SO?", options: ["Desfragmenta√ß√£o", "Criptografia de dados", "Limpeza de disco", "Backup"], answer: "Criptografia de dados" },
                { question: "BitLocker e FileVault s√£o ferramentas de:", options: ["Backup", "Antiv√≠rus", "Desfragmenta√ß√£o", "Criptografia"], answer: "Criptografia" },
                { question: "Ao descartar um disco, a formata√ß√£o simples √© suficiente para garantir a seguran√ßa dos dados.", type: "boolean", answer: false },
                { question: "Softwares de 'limpeza segura' tornam a recupera√ß√£o de dados imposs√≠vel ao:", options: ["Apagar os √≠ndices", "Comprimir os dados", "Sobrescrever o disco v√°rias vezes", "Criptografar os dados"], answer: "Sobrescrever o disco v√°rias vezes" },
                { question: "A destrui√ß√£o f√≠sica do disco √© necess√°ria quando:", options: ["O disco est√° lento", "O disco tem pouco espa√ßo", "A seguran√ßa dos dados √© de m√°xima import√¢ncia", "O usu√°rio quer comprar um novo"], answer: "A seguran√ßa dos dados √© de m√°xima import√¢ncia" },
                { question: "A escolha entre formata√ß√£o r√°pida e completa depende da necessidade de seguran√ßa e do estado do disco.", type: "boolean", answer: true },
                { question: "Como a formata√ß√£o resolve problemas de desempenho?", options: ["Aumentando a velocidade da internet", "Aumentando a mem√≥ria RAM", "Removendo ac√∫mulos de arquivos e erros", "Atualizando os drivers de v√≠deo"], answer: "Removendo ac√∫mulos de arquivos e erros" },
                { question: "Por que Bit e Byte s√£o fundamentais para o armazenamento?", options: ["Porque medem a velocidade do processador", "Porque s√£o as unidades b√°sicas que codificam toda a informa√ß√£o digital", "Porque determinam a resolu√ß√£o da tela", "Porque gerenciam a energia do computador"], answer: "Porque s√£o as unidades b√°sicas que codificam toda a informa√ß√£o digital" },
                { question: "Qual a principal diferen√ßa de seguran√ßa entre formata√ß√£o r√°pida e 'limpeza segura'?", options: ["N√£o h√° diferen√ßa", "A formata√ß√£o r√°pida criptografa, a limpeza n√£o", "A r√°pida oculta dados (recuper√°veis), a limpeza sobrescreve (irrecuper√°veis)", "A limpeza segura √© mais r√°pida"], answer: "A r√°pida oculta dados (recuper√°veis), a limpeza sobrescreve (irrecuper√°veis)" },
            ];

            const startScreen = document.getElementById('quiz-start-screen');
            const questionScreen = document.getElementById('quiz-question-screen');
            const resultsScreen = document.getElementById('quiz-results-screen');
            
            const studentNameInput = document.getElementById('student-name');
            const studentNameErrorEl = document.getElementById('student-name-error');
            const resultsStudentNameEl = document.getElementById('results-student-name');
            const resultsAttemptNumberEl = document.getElementById('results-attempt-number'); // Added

            const startBtn = document.getElementById('start-quiz-btn');
            const restartBtn = document.getElementById('restart-quiz-btn');
            const downloadPdfBtn = document.getElementById('download-pdf-btn');

            const questionEl = document.getElementById('quiz-question');
            const optionsEl = document.getElementById('quiz-options');
            const progressEl = document.getElementById('quiz-progress');
            const progressBarEl = document.getElementById('quiz-progress-bar');
            const quizMessageEl = document.getElementById('quiz-message'); 
            const timerDisplayEl = document.getElementById('question-timer-display');
            const attemptInfoEl = document.getElementById('quiz-attempt-info'); // Added


            const prevBtn = document.getElementById('prev-question-btn');
            const nextBtn = document.getElementById('next-question-btn');

            let currentQuestionIndex = 0;
            let userAnswers = new Array(quizData.length).fill(null);
            // let studentName = ''; // Replaced by currentStudentNameForQuiz
            
            let questionStartTime = 0; 
            let userTimes = []; 
            let currentTimerInterval = null; 

            let attemptCounts = {}; // Stores { studentName: count }
            let currentStudentNameForQuiz = ''; // Name for the active quiz session

            function formatTime(ms) {
                if (ms === null || ms === undefined) return "00:00.000";
                let totalSeconds = Math.floor(ms / 1000);
                let minutes = Math.floor(totalSeconds / 60);
                let seconds = totalSeconds % 60;
                let millis = ms % 1000;
                return `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}.${String(millis).padStart(3, '0')}`;
            }
            
            function startQuiz() {
                const name = studentNameInput.value.trim();
                if (name === '') {
                    studentNameErrorEl.textContent = 'Por favor, insira seu nome para come√ßar.';
                    return;
                }
                currentStudentNameForQuiz = name; // Set the active student name for this quiz session
                studentNameErrorEl.textContent = ''; 
                
                // Increment attempt count for the current student
                attemptCounts[currentStudentNameForQuiz] = (attemptCounts[currentStudentNameForQuiz] || 0) + 1;

                // Reset quiz state for the new attempt (answers, times, index)
                currentQuestionIndex = 0;
                userAnswers.fill(null);
                userTimes = new Array(quizData.length).fill(0);
                questionStartTime = 0;
                if (currentTimerInterval) {
                    clearInterval(currentTimerInterval);
                    currentTimerInterval = null;
                }
                
                startScreen.classList.add('hidden');
                resultsScreen.classList.add('hidden');
                questionScreen.classList.remove('hidden');
                quizMessageEl.textContent = ''; 

                // Display attempt number on question screen
                attemptInfoEl.textContent = `Tentativa N¬∫: ${attemptCounts[currentStudentNameForQuiz]}`;
                
                showQuestion();
            }

            function showQuestion() {
                if (currentTimerInterval) {
                    clearInterval(currentTimerInterval);
                }

                const questionData = quizData[currentQuestionIndex];
                questionEl.textContent = questionData.question;
                optionsEl.innerHTML = ''; 

                if (questionData.type === 'boolean') {
                    const options = ['Verdadeiro', 'Falso'];
                    options.forEach(optionText => {
                        const isSelected = (optionText === 'Verdadeiro' && userAnswers[currentQuestionIndex] === true) || (optionText === 'Falso' && userAnswers[currentQuestionIndex] === false);
                        const button = document.createElement('button');
                        button.textContent = optionText;
                        button.className = `w-full text-left p-4 border rounded-lg quiz-option ${isSelected ? 'selected' : ''}`;
                        button.onclick = () => selectAnswer(optionText === 'Verdadeiro');
                        optionsEl.appendChild(button);
                    });
                } else {
                    questionData.options.forEach(optionText => {
                        const isSelected = userAnswers[currentQuestionIndex] === optionText;
                        const button = document.createElement('button');
                        button.textContent = optionText;
                        button.className = `w-full text-left p-4 border rounded-lg quiz-option ${isSelected ? 'selected' : ''}`;
                        button.onclick = () => selectAnswer(optionText);
                        optionsEl.appendChild(button);
                    });
                }

                questionStartTime = Date.now(); 
                
                const initialDisplayTime = userTimes[currentQuestionIndex] || 0;
                timerDisplayEl.textContent = `Tempo: ${formatTime(initialDisplayTime)}`;
                
                let sessionStartTimestamp = Date.now(); 

                currentTimerInterval = setInterval(() => {
                    const currentSessionElapsedTime = Date.now() - sessionStartTimestamp;
                    timerDisplayEl.textContent = `Tempo: ${formatTime(initialDisplayTime + currentSessionElapsedTime)}`;
                }, 100); 


                updateNavigation();
                updateProgress();
                
                if (userAnswers[currentQuestionIndex] === null) {
                    nextBtn.disabled = true;
                    nextBtn.title = "Por favor, selecione uma resposta para continuar.";
                } else {
                    nextBtn.disabled = false;
                    nextBtn.title = "";
                }
                 quizMessageEl.textContent = ''; 
            }

            function recordTimeForCurrentQuestion() {
                if (questionStartTime > 0 && currentQuestionIndex >= 0 && currentQuestionIndex < userTimes.length) {
                    const timeSpentThisSession = Date.now() - questionStartTime;
                    userTimes[currentQuestionIndex] = (userTimes[currentQuestionIndex] || 0) + timeSpentThisSession;
                }
                questionStartTime = 0; 
                if (currentTimerInterval) {
                    clearInterval(currentTimerInterval);
                    currentTimerInterval = null;
                }
            }
            
            function selectAnswer(answer) {
                userAnswers[currentQuestionIndex] = answer;
                quizMessageEl.textContent = ''; 
                
                const optionButtons = optionsEl.querySelectorAll('.quiz-option');
                 optionButtons.forEach(btn => {
                    let btnValue;
                    if (quizData[currentQuestionIndex].type === 'boolean') {
                        btnValue = (btn.textContent === 'Verdadeiro');
                    } else {
                        btnValue = btn.textContent;
                    }
                    if (btnValue === answer) {
                        btn.classList.add('selected');
                    } else {
                        btn.classList.remove('selected');
                    }
                });

                if (userAnswers[currentQuestionIndex] !== null) {
                    nextBtn.disabled = false;
                    nextBtn.title = "";
                }
            }

            function updateNavigation() {
                prevBtn.disabled = currentQuestionIndex === 0;
                if (currentQuestionIndex === quizData.length - 1) {
                    nextBtn.textContent = 'Finalizar';
                } else {
                    nextBtn.textContent = 'Pr√≥xima';
                }
            }

            function updateProgress() {
                const progress = currentQuestionIndex + 1;
                progressEl.textContent = `Pergunta ${progress} de ${quizData.length}`;
                progressBarEl.style.width = `${(progress / quizData.length) * 100}%`;
            }

            function nextQuestion() {
                if (userAnswers[currentQuestionIndex] === null) {
                    quizMessageEl.textContent = 'Por favor, selecione uma resposta para continuar.';
                    return; 
                }
                quizMessageEl.textContent = ''; 
                
                recordTimeForCurrentQuestion(); 

                if (currentQuestionIndex < quizData.length - 1) {
                    currentQuestionIndex++;
                    showQuestion();
                } else {
                    showResults(); 
                }
            }

            function prevQuestion() {
                if (currentQuestionIndex > 0) {
                    recordTimeForCurrentQuestion(); 
                    currentQuestionIndex--;
                    quizMessageEl.textContent = ''; 
                    showQuestion();
                }
            }

            function showResults() {
                recordTimeForCurrentQuestion(); 

                questionScreen.classList.add('hidden');
                resultsScreen.classList.remove('hidden');
                
                resultsStudentNameEl.textContent = currentStudentNameForQuiz; 
                resultsAttemptNumberEl.textContent = attemptCounts[currentStudentNameForQuiz]; // Display attempt

                let score = 0;
                userAnswers.forEach((answer, index) => {
                    if(answer === quizData[index].answer) {
                        score++;
                    }
                });

                const percentage = Math.round((score / quizData.length) * 100);
                document.getElementById('quiz-score').textContent = score;
                document.getElementById('quiz-total').textContent = quizData.length;
                document.getElementById('quiz-percentage').textContent = `${percentage}%`;

                const feedbackEl = document.getElementById('quiz-feedback');
                if (percentage >= 90) {
                    feedbackEl.textContent = "Excelente! Voc√™ √© um mestre da formata√ß√£o e seguran√ßa digital.";
                    feedbackEl.className = "text-center text-green-700 font-medium mb-8";
                } else if (percentage >= 70) {
                    feedbackEl.textContent = "Muito bom! Voc√™ tem um √≥timo conhecimento sobre o assunto.";
                    feedbackEl.className = "text-center text-blue-700 font-medium mb-8";
                } else if (percentage >= 50) {
                    feedbackEl.textContent = "Bom trabalho! Continue estudando para aprimorar alguns conceitos.";
                     feedbackEl.className = "text-center text-yellow-700 font-medium mb-8";
                } else {
                    feedbackEl.textContent = "N√£o desanime. Reveja os conceitos e tente novamente para fixar o conhecimento!";
                    feedbackEl.className = "text-center text-red-700 font-medium mb-8";
                }
            }

            function resetQuizState() {
                // Pre-fill the student name input with the name from the *just completed* quiz for convenience
                if (currentStudentNameForQuiz) {
                    studentNameInput.value = currentStudentNameForQuiz;
                } else {
                    studentNameInput.value = ''; 
                }
                studentNameErrorEl.textContent = '';
                
                // Clear timer and other visual quiz elements specific to question screen
                if (currentTimerInterval) {
                    clearInterval(currentTimerInterval);
                    currentTimerInterval = null;
                }
                timerDisplayEl.textContent = `Tempo: ${formatTime(0)}`;
                attemptInfoEl.textContent = ''; // Clear attempt info on question screen

                // Transition UI back to start screen
                // Quiz-specific data like answers, times, currentQuestionIndex, and attempt counts
                // will be freshly initialized/incremented in startQuiz() when the user starts again.
                startScreen.classList.remove('hidden');
                questionScreen.classList.add('hidden');
                resultsScreen.classList.add('hidden');
                quizMessageEl.textContent = '';
            }
            
            function generatePDF() {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                
                const score = document.getElementById('quiz-score').textContent;
                const total = document.getElementById('quiz-total').textContent;
                const percentage = document.getElementById('quiz-percentage').textContent;
                const feedback = document.getElementById('quiz-feedback').textContent;
                const date = new Date().toLocaleDateString('pt-BR', { day: '2-digit', month: '2-digit', year: 'numeric', hour: '2-digit', minute: '2-digit', second: '2-digit' });
                const currentAttemptNumber = attemptCounts[currentStudentNameForQuiz] || 0;


                doc.setFontSize(22);
                doc.text("Relat√≥rio de Desempenho do Quiz", 105, 20, null, null, 'center');
                doc.setFontSize(12);
                doc.text(`Data: ${date}`, 105, 30, null, null, 'center');
                doc.text(`Aluno(a): ${currentStudentNameForQuiz}`, 105, 38, null, null, 'center'); 
                doc.text(`Tentativa N¬∫: ${currentAttemptNumber}`, 105, 46, null, null, 'center'); // Added attempt number
                
                let currentY = 46 + 10; // Start Y position after attempt number

                doc.setFontSize(16);
                doc.text("Seu Resultado:", 20, currentY); 
                currentY += 10;
                doc.setFontSize(12);
                doc.text(`- Pontua√ß√£o: ${score} de ${total} acertos`, 20, currentY); 
                currentY += 10;
                doc.text(`- Percentual de acerto: ${percentage}`, 20, currentY); 
                currentY += 10;
                
                const feedbackLines = doc.splitTextToSize(`- Feedback: ${feedback}`, 170); 
                doc.text(feedbackLines, 20, currentY); 
                currentY += (feedbackLines.length * 7) + 10; // Adjusted spacing
                
                doc.setFontSize(16);
                doc.text("Resumo das Respostas:", 20, currentY);
                currentY += 10;

                userAnswers.forEach((answer, index) => {
                    const questionData = quizData[index];
                    const userAnswerText = answer === null ? "N√£o respondida" : (typeof answer === 'boolean' ? (answer ? 'Verdadeiro' : 'Falso') : answer);
                    const correctAnswerText = typeof questionData.answer === 'boolean' ? (questionData.answer ? 'Verdadeiro' : 'Falso') : questionData.answer;
                    const isCorrect = answer === questionData.answer;
                    const timeTaken = userTimes[index]; 
                    const timeText = formatTime(timeTaken);
                    
                    if (currentY > 260) { 
                        doc.addPage();
                        currentY = 20;
                         doc.setFontSize(12); 
                         doc.text(`Aluno(a): ${currentStudentNameForQuiz} (continua√ß√£o)`, 105, 10, null, null, 'center');
                         currentY = 25; 
                    }
                    
                    doc.setFontSize(10);
                    const questionTextLines = doc.splitTextToSize(`${index + 1}. ${questionData.question}`, 170);
                    doc.setTextColor(isCorrect ? '#166534' : '#991b1b'); 
                    doc.text(questionTextLines, 20, currentY);
                    currentY += (questionTextLines.length * 4) + 2; 

                    doc.setTextColor(0); 
                    const userAnswerLines = doc.splitTextToSize(`Sua resposta: ${userAnswerText}`, 165);
                    doc.text(userAnswerLines, 25, currentY);
                    currentY += (userAnswerLines.length * 4) + 2;

                    if (!isCorrect) {
                       const correctAnswerLines = doc.splitTextToSize(`Resposta correta: ${correctAnswerText}`, 165);
                       doc.setTextColor('#1e40af'); 
                       doc.text(correctAnswerLines, 25, currentY);
                       currentY += (correctAnswerLines.length * 4) + 2;
                       doc.setTextColor(0);
                    }

                    doc.setFontSize(9);
                    doc.setTextColor('#334155'); 
                    doc.text(`Tempo gasto: ${timeText}`, 25, currentY);
                    currentY += 4; 

                    currentY += 6; 
                });

                doc.save(`relatorio-quiz-${currentStudentNameForQuiz.replace(/\s+/g, '_')}-tentativa_${currentAttemptNumber}-${new Date().getTime()}.pdf`);
            }

            startBtn.addEventListener('click', startQuiz);
            restartBtn.addEventListener('click', resetQuizState); 
            nextBtn.addEventListener('click', nextQuestion);
            prevBtn.addEventListener('click', prevQuestion);
            downloadPdfBtn.addEventListener('click', generatePDF);
        });

    </script>
</body>
</html>
